---
import PortfolioLayout from "../../layouts/PortfolioLayout.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import { getCollection } from "astro:content";
import FormattedDate from "../../components/FormattedDate.astro";

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<PortfolioLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<section class="pt-24 pb-20 px-4 sm:px-6 lg:px-8">
		<div class="max-w-4xl mx-auto">
			<h1 class="font-serif text-4xl font-light text-stone-900 mb-12">Blog</h1>
			<ul class="grid sm:grid-cols-2 gap-8 list-none m-0 p-0">
				{posts.map((post) => (
					<li>
						<a href={`/blog/${post.id}/`} class="block group">
							{post.data.heroImage && (
								<img
									width={720}
									height={360}
									src={post.data.heroImage}
									alt=""
									class="w-full aspect-video object-cover rounded-sm mb-4 transition-transform group-hover:scale-[1.02]"
								/>
							)}
							<h2 class="font-serif text-xl font-semibold text-stone-900 group-hover:text-stone-700">
								{post.data.title}
							</h2>
							<p class="text-stone-500 text-sm mt-1">
								<FormattedDate date={post.data.pubDate} />
							</p>
						</a>
					</li>
				))}
			</ul>
		</div>
	</section>
</PortfolioLayout>
